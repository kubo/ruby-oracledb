<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: OracleDB::Stmt
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "OracleDB::Stmt";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../OracleDB.html" title="OracleDB (module)">OracleDB</a></span></span>
     &raquo; 
    <span class="title">Stmt</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: OracleDB::Stmt
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">OracleDB::Stmt</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/oracledb.rb<span class="defines">,<br />
  ext/oracledb/rboradb_stmt.c</span>
</dd>
  </dl>
  
</div>








  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#batch_errors-instance_method" title="#batch_errors (instance method)">#<strong>batch_errors</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bind-instance_method" title="#bind (instance method)">#<strong>bind</strong>(key, var = nil, **kw)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bind_count-instance_method" title="#bind_count (instance method)">#<strong>bind_count</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bind_names-instance_method" title="#bind_names (instance method)">#<strong>bind_names</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#close-instance_method" title="#close (instance method)">#<strong>close</strong>(*args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#define-instance_method" title="#define (instance method)">#<strong>define</strong>(pos, var = nil, **kw)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#execute-instance_method" title="#execute (instance method)">#<strong>execute</strong>(mode: nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetch-instance_method" title="#fetch (instance method)">#<strong>fetch</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetch_array_size-instance_method" title="#fetch_array_size (instance method)">#<strong>fetch_array_size</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetch_array_size=-instance_method" title="#fetch_array_size= (instance method)">#<strong>fetch_array_size=</strong>(array_size)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#implicit_result-instance_method" title="#implicit_result (instance method)">#<strong>implicit_result</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#info-instance_method" title="#info (instance method)">#<strong>info</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#last_rowid-instance_method" title="#last_rowid (instance method)">#<strong>last_rowid</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#num_query_columns-instance_method" title="#num_query_columns (instance method)">#<strong>num_query_columns</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#oci_attr-instance_method" title="#oci_attr (instance method)">#<strong>oci_attr</strong>(attr, attr_data_type)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#prefetch_rows-instance_method" title="#prefetch_rows (instance method)">#<strong>prefetch_rows</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#prefetch_rows=-instance_method" title="#prefetch_rows= (instance method)">#<strong>prefetch_rows=</strong>(obj)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#query_info-instance_method" title="#query_info (instance method)">#<strong>query_info</strong>(pos)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#row_count-instance_method" title="#row_count (instance method)">#<strong>row_count</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#row_counts-instance_method" title="#row_counts (instance method)">#<strong>row_counts</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#scroll-instance_method" title="#scroll (instance method)">#<strong>scroll</strong>(*args)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_oci_attr-instance_method" title="#set_oci_attr (instance method)">#<strong>set_oci_attr</strong>(attr, attr_data_type, value)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#subscr_query_id-instance_method" title="#subscr_query_id (instance method)">#<strong>subscr_query_id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="batch_errors-instance_method">
  
    #<strong>batch_errors</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/oracledb/rboradb_stmt.c', line 106</span>

static VALUE stmt_batch_errors(VALUE self)
{
    Stmt_t *stmt = To_Stmt(self);
    uint32_t i, count;
    dpiErrorInfo *errors;
    VALUE ary, tmp;

    if (dpiStmt_getBatchErrorCount(stmt-&gt;handle, &amp;count) != DPI_SUCCESS) {
        RBORADB_RAISE_ERROR(stmt);
    }
    ary = rb_ary_new_capa(count);
    if (count == 0) {
        return ary;
    }
    errors = RB_ALLOCV_N(dpiErrorInfo, tmp, count);
    if (dpiStmt_getBatchErrors(stmt-&gt;handle, count, errors) != DPI_SUCCESS) {
        RBORADB_RAISE_ERROR(stmt);
    }
    for (i = 0; i &lt; count; i++) {
        rb_ary_push(ary, rboradb_from_dpiErrorInfo(&amp;errors[i]));
    }
    RB_ALLOCV_END(tmp);
    return ary;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="bind-instance_method">
  
    #<strong>bind</strong>(key, var = nil, **kw)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


108
109
110
111
112
113
114
115
116
117
118
119</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oracledb.rb', line 108</span>

<span class='kw'>def</span> <span class='id identifier rubyid_bind'>bind</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_var'>var</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kw'>kw</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_var'>var</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Var.html" title="OracleDB::Var (class)">Var</a></span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_var'>var</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Var.html" title="OracleDB::Var (class)">Var</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Var.html#initialize-instance_method" title="OracleDB::Var#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_var'>var</span><span class='comma'>,</span> <span class='label'>array_size:</span> <span class='ivar'>@array_size</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kw'>kw</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_key'>key</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>Numeric</span>
    <span class='id identifier rubyid___bind_by_pos'>__bind_by_pos</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_var'>var</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid___bind_by_name'>__bind_by_name</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_var'>var</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='ivar'>@bind_vars</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@bind_vars</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_var'>var</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="bind_count-instance_method">
  
    #<strong>bind_count</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


131
132
133
134</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/oracledb/rboradb_stmt.c', line 131</span>

static VALUE stmt_bind_count(VALUE self)
{
    GET_UINT32(Stmt, BindCount);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="bind_names-instance_method">
  
    #<strong>bind_names</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/oracledb/rboradb_stmt.c', line 136</span>

static VALUE stmt_bind_names(VALUE self)
{
    Stmt_t *stmt = To_Stmt(self);
    const char **names;
    uint32_t *name_lengths;
    uint32_t idx, count;
    VALUE bind_names;

    if (dpiStmt_getBindCount(stmt-&gt;handle, &amp;count) != DPI_SUCCESS) {
        RBORADB_RAISE_ERROR(stmt);
    }
    names = ALLOCA_N(const char *, count);
    name_lengths = ALLOCA_N(uint32_t, count);
    if (dpiStmt_getBindNames(stmt-&gt;handle, &amp;count, names, name_lengths) != DPI_SUCCESS) {
        RBORADB_RAISE_ERROR(stmt);
    }
    bind_names = rb_ary_new_capa(count);
    for (idx = 0; idx &lt; count; idx++) {
        rb_ary_push(bind_names, rb_enc_str_new(names[idx], name_lengths[idx], rb_utf8_encoding()));
    }
    return bind_names;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="close-instance_method">
  
    #<strong>close</strong>(*args)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94
95
96
97
98
99
100
101
102
103
104</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/oracledb/rboradb_stmt.c', line 92</span>

static VALUE stmt_close(int argc, VALUE *argv, VALUE self)
{
    Stmt_t *stmt = To_Stmt(self);
    VALUE tag;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;tag);
    OptExportString(tag);
    if (dpiStmt_close(stmt-&gt;handle, OPT_RSTRING_PTR(tag), OPT_RSTRING_LEN(tag)) != DPI_SUCCESS) {
        RBORADB_RAISE_ERROR(stmt);
    }
    RB_GC_GUARD(tag);
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="define-instance_method">
  
    #<strong>define</strong>(pos, var = nil, **kw)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


121
122
123
124
125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oracledb.rb', line 121</span>

<span class='kw'>def</span> <span class='id identifier rubyid_define'>define</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='comma'>,</span> <span class='id identifier rubyid_var'>var</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kw'>kw</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_var'>var</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="Var.html" title="OracleDB::Var (class)">Var</a></span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_var'>var</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Var.html" title="OracleDB::Var (class)">Var</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Var.html#initialize-instance_method" title="OracleDB::Var#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_var'>var</span><span class='comma'>,</span> <span class='label'>array_size:</span> <span class='ivar'>@array_size</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kw'>kw</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid___define'>__define</span><span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='comma'>,</span> <span class='id identifier rubyid_var'>var</span><span class='rparen'>)</span>
  <span class='ivar'>@define_vars</span><span class='lbracket'>[</span><span class='id identifier rubyid_pos'>pos</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_var'>var</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="execute-instance_method">
  
    #<strong>execute</strong>(mode: nil)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94
95
96
97
98
99
100
101
102
103
104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oracledb.rb', line 92</span>

<span class='kw'>def</span> <span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='label'>mode:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@num_query_columns</span> <span class='op'>=</span> <span class='id identifier rubyid___execute'>__execute</span><span class='lparen'>(</span><span class='id identifier rubyid_mode'>mode</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='ivar'>@num_query_columns</span> <span class='op'>!=</span> <span class='int'>0</span>
    <span class='ivar'>@define_vars</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='ivar'>@num_query_columns</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
      <span class='id identifier rubyid_num_fetched'>num_fetched</span> <span class='op'>=</span> <span class='int'>0</span>
      <span class='kw'>while</span> <span class='id identifier rubyid_row'>row</span> <span class='op'>=</span> <span class='id identifier rubyid_fetch'>fetch</span>
        <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_row'>row</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_num_fetched'>num_fetched</span> <span class='op'>+=</span> <span class='int'>1</span>
      <span class='kw'>end</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_num_fetched'>num_fetched</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fetch-instance_method">
  
    #<strong>fetch</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131
132
133
134
135
136
137
138
139
140
141</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oracledb.rb', line 129</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fetch'>fetch</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@defined</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@num_query_columns</span> <span class='op'>!=</span> <span class='int'>0</span>
    <span class='ivar'>@define_vars</span><span class='period'>.</span><span class='id identifier rubyid_each_index'>each_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_idx'>idx</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='ivar'>@define_vars</span><span class='lbracket'>[</span><span class='id identifier rubyid_idx'>idx</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
        <span class='id identifier rubyid_define'>define</span><span class='lparen'>(</span><span class='id identifier rubyid_idx'>idx</span> <span class='op'>+</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_query_info'>query_info</span><span class='lparen'>(</span><span class='id identifier rubyid_idx'>idx</span> <span class='op'>+</span> <span class='int'>1</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_buffer_row_index'>buffer_row_index</span> <span class='op'>=</span> <span class='id identifier rubyid___fetch'>__fetch</span>
  <span class='id identifier rubyid_buffer_row_index'>buffer_row_index</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@define_vars</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_var'>var</span><span class='op'>|</span>
    <span class='id identifier rubyid_var'>var</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_buffer_row_index'>buffer_row_index</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fetch_array_size-instance_method">
  
    #<strong>fetch_array_size</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


159
160
161
162</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/oracledb/rboradb_stmt.c', line 159</span>

static VALUE stmt_fetch_array_size(VALUE self)
{
    return rb_ivar_get(self, id_at_array_size);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fetch_array_size=-instance_method">
  
    #<strong>fetch_array_size=</strong>(array_size)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


323
324
325
326
327
328
329
330
331
332
333</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/oracledb/rboradb_stmt.c', line 323</span>

static VALUE stmt_set_fetch_array_size(VALUE self, VALUE array_size)
{
    Stmt_t *stmt = To_Stmt(self);
    uint32_t size = NUM2UINT(array_size);

    if (dpiStmt_setFetchArraySize(stmt-&gt;handle, size) != DPI_SUCCESS) {
        RBORADB_RAISE_ERROR(stmt);
    }
    rb_ivar_set(self, id_at_array_size, UINT2NUM(size));
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="implicit_result-instance_method">
  
    #<strong>implicit_result</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166
167
168
169
170
171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/oracledb/rboradb_stmt.c', line 164</span>

static VALUE stmt_implicit_result(VALUE self)
{
    Stmt_t *stmt = To_Stmt(self);
    dpiStmt *implicit_result;

    if (dpiStmt_getImplicitResult(stmt-&gt;handle, &amp;implicit_result) != DPI_SUCCESS) {
        RBORADB_RAISE_ERROR(stmt);
    }
    return implicit_result ? rboradb_from_dpiStmt(implicit_result, stmt-&gt;dconn, 0, 0) : Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="info-instance_method">
  
    #<strong>info</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


143
144
145
146</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/oracledb.rb', line 143</span>

<span class='kw'>def</span> <span class='id identifier rubyid_info'>info</span>
  <span class='ivar'>@info</span> <span class='op'>||=</span> <span class='id identifier rubyid___info'>__info</span>
  <span class='ivar'>@info</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="last_rowid-instance_method">
  
    #<strong>last_rowid</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


180
181
182
183
184
185
186
187
188
189</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/oracledb/rboradb_stmt.c', line 180</span>

static VALUE stmt_last_rowid(VALUE self)
{
    Stmt_t *stmt = To_Stmt(self);
    dpiRowid *rowid;

    if (dpiStmt_getLastRowid(stmt-&gt;handle, &amp;rowid) != DPI_SUCCESS) {
        RBORADB_RAISE_ERROR(stmt);
    }
    return rowid ? rboradb_from_dpiRowid(rowid, stmt-&gt;dconn, 1) : Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="num_query_columns-instance_method">
  
    #<strong>num_query_columns</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


223
224
225
226
227</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/oracledb/rboradb_stmt.c', line 223</span>

static VALUE stmt_num_query_columns(VALUE self)
{
    Stmt_t *stmt = To_Stmt(self);
    return UINT2NUM(stmt-&gt;num_query_columns);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="oci_attr-instance_method">
  
    #<strong>oci_attr</strong>(attr, attr_data_type)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/oracledb/rboradb_stmt.c', line 229</span>

static VALUE stmt_oci_attr(VALUE self, VALUE attr, VALUE attr_data_type)
{
    Stmt_t *stmt = To_Stmt(self);
    OciAttrDataType type = rboradb_to_OciAttrDataType(attr_data_type);
    dpiDataBuffer val;
    uint32_t len;

    if (dpiStmt_getOciAttr(stmt-&gt;handle, NUM2UINT(attr), &amp;val, &amp;len) != DPI_SUCCESS) {
        RBORADB_RAISE_ERROR(stmt);
    }
    switch (type) {
    case RBORADB_OCI_ATTR_DATA_TYPE_BOOLEAN:
        return val.asBoolean ? Qtrue : Qfalse;
    case RBORADB_OCI_ATTR_DATA_TYPE_TEXT:
        return rb_enc_str_new(val.asString, len, rb_utf8_encoding());
    case RBORADB_OCI_ATTR_DATA_TYPE_UB1:
        return INT2FIX(val.asUint8);
    case RBORADB_OCI_ATTR_DATA_TYPE_UB2:
        return INT2FIX(val.asUint16);
    case RBORADB_OCI_ATTR_DATA_TYPE_UB4:
        return UINT2NUM(val.asUint32);
    case RBORADB_OCI_ATTR_DATA_TYPE_UB8:
        return ULL2NUM(val.asUint64);
    }
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="prefetch_rows-instance_method">
  
    #<strong>prefetch_rows</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


256
257
258
259</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/oracledb/rboradb_stmt.c', line 256</span>

static VALUE stmt_prefetch_rows(VALUE self)
{
    GET_UINT32(Stmt, PrefetchRows);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="prefetch_rows=-instance_method">
  
    #<strong>prefetch_rows=</strong>(obj)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


335
336
337
338</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/oracledb/rboradb_stmt.c', line 335</span>

static VALUE stmt_set_prefetch_rows(VALUE self, VALUE obj)
{
    SET_UINT32(Stmt, PrefetchRows);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="query_info-instance_method">
  
    #<strong>query_info</strong>(pos)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


261
262
263
264
265
266
267
268
269
270</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/oracledb/rboradb_stmt.c', line 261</span>

static VALUE stmt_query_info(VALUE self, VALUE pos)
{
    Stmt_t *stmt = To_Stmt(self);
    dpiQueryInfo info;

    if (dpiStmt_getQueryInfo(stmt-&gt;handle, NUM2UINT(pos), &amp;info) != DPI_SUCCESS) {
        RBORADB_RAISE_ERROR(stmt);
    }
    return rboradb_from_dpiQueryInfo(&amp;info, stmt-&gt;dconn);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="row_count-instance_method">
  
    #<strong>row_count</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


283
284
285
286</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/oracledb/rboradb_stmt.c', line 283</span>

static VALUE stmt_row_count(VALUE self)
{
    GET_UINT64(Stmt, RowCount);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="row_counts-instance_method">
  
    #<strong>row_counts</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/oracledb/rboradb_stmt.c', line 288</span>

static VALUE stmt_row_counts(VALUE self)
{
    Stmt_t *stmt = To_Stmt(self);
    uint32_t i, num_counts;
    uint64_t *counts;
    VALUE ary;

    if (dpiStmt_getRowCounts(stmt-&gt;handle, &amp;num_counts, &amp;counts) != DPI_SUCCESS) {
        RBORADB_RAISE_ERROR(stmt);
    }
    ary = rb_ary_new_capa(num_counts);
    for (i = 0; i &lt; num_counts; i++) {
        rb_ary_push(ary, ULL2NUM(counts[i]));
    }
    return ary;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="scroll-instance_method">
  
    #<strong>scroll</strong>(*args)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


310
311
312
313
314
315
316
317
318
319
320
321</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/oracledb/rboradb_stmt.c', line 310</span>

static VALUE stmt_scroll(int argc, VALUE *argv, VALUE self)
{
    Stmt_t *stmt = To_Stmt(self);
    VALUE mode;
    VALUE offset;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;mode, &amp;offset);
    if (rbOraDBStmt_scroll(stmt-&gt;dconn-&gt;handle, stmt-&gt;handle, rboradb_to_dpiFetchMode(mode), NIL_P(offset) ? 0 : NUM2INT(offset), stmt-&gt;buffer_row_index) != DPI_SUCCESS) {
        RBORADB_RAISE_ERROR(stmt);
    }
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_oci_attr-instance_method">
  
    #<strong>set_oci_attr</strong>(attr, attr_data_type, value)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/oracledb/rboradb_stmt.c', line 340</span>

static VALUE stmt_set_oci_attr(VALUE self, VALUE attr, VALUE attr_data_type, VALUE value)
{
    Stmt_t *stmt = To_Stmt(self);
    OciAttrDataType type = rboradb_to_OciAttrDataType(attr_data_type);
    union {
        int boolval;
        char *textval;
        uint8_t ub1val;
        uint16_t ub2val;
        uint32_t ub4val;
        uint64_t ub8val;
    } val;
    uint32_t len = 0;

    switch (type) {
    case RBORADB_OCI_ATTR_DATA_TYPE_BOOLEAN:
        val.boolval = RTEST(value) ? 1 : 0;
        break;
    case RBORADB_OCI_ATTR_DATA_TYPE_TEXT:
        ExportString(value);
        val.textval = RSTRING_PTR(value);
        len = RSTRING_LEN(value);
        break;
    case RBORADB_OCI_ATTR_DATA_TYPE_UB1:
        val.ub1val = NUM2UINT(value);
        break;
    case RBORADB_OCI_ATTR_DATA_TYPE_UB2:
        val.ub2val = NUM2UINT(value);
        break;
    case RBORADB_OCI_ATTR_DATA_TYPE_UB4:
        val.ub4val = NUM2UINT(value);
        break;
    case RBORADB_OCI_ATTR_DATA_TYPE_UB8:
        val.ub8val = NUM2ULL(value);
        break;
    }
    if (dpiStmt_setOciAttr(stmt-&gt;handle, NUM2UINT(attr), &amp;val, len) != DPI_SUCCESS) {
        RBORADB_RAISE_ERROR(stmt);
    }
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="subscr_query_id-instance_method">
  
    #<strong>subscr_query_id</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="OracleDB::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


305
306
307
308</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/oracledb/rboradb_stmt.c', line 305</span>

static VALUE stmt_subscr_query_id(VALUE self)
{
    GET_UINT64(Stmt, SubscrQueryId);
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sat Sep  4 04:45:38 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-3.0.2).
</div>

    </div>
  </body>
</html>